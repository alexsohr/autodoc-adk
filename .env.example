# ─────────────────────────────────────────────
# AutoDoc ADK Configuration
# ─────────────────────────────────────────────
# Copy this file to .env and fill in your values
# Runtime prerequisite: Node.js 18+ (required for @modelcontextprotocol/server-filesystem MCP server)

# ── Database ──
DATABASE_URL=postgresql+asyncpg://autodoc:autodoc@localhost:5432/autodoc
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ── Prefect ──
PREFECT_API_URL=http://localhost:4200/api
PREFECT_WORK_POOL=local-dev
AUTODOC_FLOW_DEPLOYMENT_PREFIX=dev

# ── Application ──
APP_COMMIT_SHA=

# ── Default LLM Model ──
# Used when agent-specific vars are unset
# Supports: gemini-* (native), vertex_ai/*, azure/*, bedrock/*
DEFAULT_MODEL=gemini-2.5-flash

# ── Per-Agent Model Overrides ──
STRUCTURE_GENERATOR_MODEL=gemini-2.5-flash
STRUCTURE_CRITIC_MODEL=gemini-2.5-flash
PAGE_GENERATOR_MODEL=gemini-2.5-flash
PAGE_CRITIC_MODEL=gemini-2.5-flash
README_GENERATOR_MODEL=gemini-2.5-flash
README_CRITIC_MODEL=gemini-2.5-flash

# ── Embedding ──
EMBEDDING_MODEL=text-embedding-3-large
EMBEDDING_DIMENSIONS=3072
EMBEDDING_BATCH_SIZE=100

# ── Quality Thresholds ──
QUALITY_THRESHOLD=7.0
MAX_AGENT_ATTEMPTS=3
# Per-criterion minimum floors (override per-agent)
STRUCTURE_COVERAGE_CRITERION_FLOOR=5.0
PAGE_ACCURACY_CRITERION_FLOOR=5.0

# ── Repository Size Limits ──
MAX_REPO_SIZE=524288000
MAX_TOTAL_FILES=5000
MAX_FILE_SIZE=1048576

# ── Chunk Settings ──
CHUNK_MAX_TOKENS=512
CHUNK_OVERLAP_TOKENS=50
CHUNK_MIN_TOKENS=50

# ── Provider Credentials ──
# GitHub (for private repos)
# GITHUB_DEFAULT_TOKEN=ghp_...

# Google Vertex AI (for vertex_ai/* models)
# VERTEXAI_PROJECT=your-gcp-project
# VERTEXAI_LOCATION=us-central1
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# Azure OpenAI (for azure/* models)
# AZURE_API_KEY=your-key
# AZURE_API_BASE=https://your-resource.openai.azure.com
# AZURE_API_VERSION=2024-06-01

# AWS Bedrock (for bedrock/* models)
# AWS_ACCESS_KEY_ID=your-key
# AWS_SECRET_ACCESS_KEY=your-secret
# AWS_REGION_NAME=us-east-1

# ── Session Archival ──
# SESSION_ARCHIVE_BUCKET=autodoc-sessions
# AWS_ACCESS_KEY_ID=  (reuse Bedrock creds or set separate)
# AWS_SECRET_ACCESS_KEY=
# AWS_REGION_NAME=us-east-1

# ── OpenTelemetry ──
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
# OTEL_SERVICE_NAME=autodoc-adk
